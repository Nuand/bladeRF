cmake_minimum_required(VERSION 2.8)
add_subdirectory(bladeRF-cli)

if(ENABLE_BACKEND_LIBUSB)
    find_package(LibUSB)
    include(CheckFunctionExists)
    set(CMAKE_REQUIRED_INCLUDES libusb.h)
    set(CMAKE_REQUIRED_LIBRARIES ${LIBUSB_LIBRARIES})
    check_function_exists(libusb_hotplug_register_callback HAVE_LIBUSB_HOTPLUG)
    unset(CMAKE_REQUIRED_INCLUDES)
    unset(CMAKE_REQUIRED_LIBRARIES)
endif(ENABLE_BACKEND_LIBUSB)

if(${HAVE_LIBUSB_HOTPLUG} MATCHES "1")
    add_subdirectory(bladeRF-flash)
endif(${HAVE_LIBUSB_HOTPLUG} MATCHES "1")
